---
title: "Attendance"
author: "Amanda E. Ljuba"
date: '2022-06-13'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(ggplot2)
library(dplyr)
library(tidyverse)
read_excel("~/Downloads/DSPG-R-Training/2022_DSPG_Loudoun/shinyapp/data/absencerate.xlsx")
attendance <- read_excel("~/Downloads/DSPG-R-Training/2022_DSPG_Loudoun/shinyapp/data/absencerate.xlsx")
```


```{r}
att_per <- attendance$`Absence Rate`
Percent <- att_per*100
Quarter <- attendance$`School Quarter`
School <- attendance$`School Name`
ggplot(attendance,aes(x=quarter,y=att_rate,group=School,color=School))+geom_point()+geom_line() +labs(title = "Student Absences by 2020-2021 Quarter",caption= "Source: LCPS Dashboard 2021-2022",x="Quarter",y="Percentage") + theme(plot.caption.position = "plot",
        plot.caption = element_text(hjust = 1)) + scale_fill_brewer(palette = "Set1")
```


```{r}
plot_ly(attendance,x = ~Quarter, y = ~Percent, color  = ~School, type = 'scatter',mode = 'lines',hoverinfo = "text",text = ~paste("School:",School,"<br>","Percent:",Percent)) %>% layout(title = "Student Absences by 2020-2021 Quarter",xaxis = list(title = ""))
```



att_per <- attendance$`Absence Rate`
quarter <- attendance$`School Quarter`
quarters <- as.numeric(quarter)
School <- attendance$`School Name`
ggplot(attendance,aes(x=quarter,y=att_per,fill=School))+geom_col(position="dodge")+labs(title="Absence Percent by Quarter",subtitle="Loudoun County Community Schools 2021-2022",caption= "Source: LCPS Dashboard",x="Quarter",y="Percentage") + theme(plot.caption.position = "plot",
        plot.caption = element_text(hjust = 1)) + scale_fill_brewer(palette = "Set1")
